<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sudoku - Play</title>
  <link rel="stylesheet" href="./styles.css" />
  <link rel="stylesheet" href="./kri-style.css" />
  <link rel="stylesheet" href="./theme-selector.css" />
  <link rel="stylesheet" href="./light-theme-overrides.css" />
  <script src="./theme.js"></script>
</head>

<body>
  <div class="game-container">
    <!-- Logo in top-left corner -->
    <a href="./index.html" style="text-decoration: none;">
      <img src="./Name_Logo.svg" alt="Sudoku Logo" class="floating-logo" />
    </a>

    <!-- Main Content Wrapper (Game + Stats) -->
    <div class="game-content-wrapper">
      <!-- Left Side: Game Area -->
      <div class="game-area">
        <!-- Unified Header Bar: Back | Timer | Pause | Theme Toggle -->
        <div class="game-header-bar">
          <a href="./index.html" class="back-btn">
            <span class="icon">‚Üê</span>
          </a>
          <div class="timer-display">
            <span class="timer" id="timer">00:00</span>
          </div>
          <button class="pause-btn" id="pauseBtn">
            <span class="icon">‚è∏</span>
          </button>
          <button class="pause-btn" id="themeToggleBtn" aria-label="Toggle Theme">
            <!-- Sun icon for dark mode (click to go light) -->
            <svg class="icon theme-icon-light" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="5"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <!-- Moon icon for light mode (click to go dark) -->
            <svg class="icon theme-icon-dark" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              style="display: none;">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
          </button>
        </div>

        <!-- Action Buttons (4 buttons in a row) -->
        <div class="action-buttons">
          <button class="action-btn" id="undoBtn">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 7v6h6M21 17v-6h-6M3 13a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3M21 11a9 9 0 0 1-9 9 9 9 0 0 1-6-2.3" />
            </svg>
            <span>Undo</span>
          </button>
          <button class="action-btn" id="autoSolveBtn">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0z" />
            </svg>
            <span>Auto Solve</span>
          </button>
          <button class="action-btn" id="hintBtn">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
              <path
                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
            <span>Hint</span>
          </button>
          <button class="action-btn" id="newGameBtn">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2" />
            </svg>
            <span>New Game</span>
          </button>
        </div>

        <!-- Game Card with Grid -->
        <div class="game-card">
          <div id="grid" class="grid"></div>
        </div>

        <!-- Mode Display -->
        <div class="mode-display" style="margin-top: -20px;">
          MODE: <span id="currentMode">Medium</span>
        </div>

        <!-- Smart Input Panel (Below grid on mobile/tablet) -->
        <div class="smart-input-panel" id="smartInputPanel">
          <button class="number-btn" data-n="1">
            <span class="number">1</span>
            <span class="count" id="count-1">0/9</span>
          </button>
          <button class="number-btn" data-n="2">
            <span class="number">2</span>
            <span class="count" id="count-2">0/9</span>
          </button>
          <button class="number-btn" data-n="3">
            <span class="number">3</span>
            <span class="count" id="count-3">0/9</span>
          </button>
          <button class="number-btn" data-n="4">
            <span class="number">4</span>
            <span class="count" id="count-4">0/9</span>
          </button>
          <button class="number-btn" data-n="5">
            <span class="number">5</span>
            <span class="count" id="count-5">0/9</span>
          </button>
          <button class="number-btn" data-n="6">
            <span class="number">6</span>
            <span class="count" id="count-6">0/9</span>
          </button>
          <button class="number-btn" data-n="7">
            <span class="number">7</span>
            <span class="count" id="count-7">0/9</span>
          </button>
          <button class="number-btn" data-n="8">
            <span class="number">8</span>
            <span class="count" id="count-8">0/9</span>
          </button>
          <button class="number-btn" data-n="9">
            <span class="number">9</span>
            <span class="count" id="count-9">0/9</span>
          </button>
          <button class="number-btn erase-btn" data-n="0">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
            </svg>
            <span>Erase</span>
          </button>
        </div>
      </div>

      <!-- Middle Column: Performance Stats Card -->
      <div class="stats-card">
        <div class="stats-header">
          <svg class="stats-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2M8.5 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM20 8v6M23 11h-6" />
          </svg>
          <h3>Your Performance In Current Game</h3>
        </div>

        <div class="strain-score-container">
          <div class="strain-label">Strain Score</div>
          <div class="strain-value" id="strainScore">0</div>
          <div class="strain-bar">
            <div class="strain-fill" id="strainFill"></div>
          </div>
          <div class="strain-description" id="strainDescription">Just started</div>
        </div>

        <div class="stats-metrics">
          <div class="metric">
            <div class="metric-icon">‚è±Ô∏è</div>
            <div class="metric-content">
              <div class="metric-label">Avg Time/Move</div>
              <div class="metric-value" id="avgTimePerMove">0s</div>
            </div>
          </div>

          <div class="metric">
            <div class="metric-icon">‚Ü©Ô∏è</div>
            <div class="metric-content">
              <div class="metric-label">Undo Rate</div>
              <div class="metric-value" id="undoRate">0%</div>
            </div>
          </div>

          <div class="metric" title="Wrong numbers placed during the game">
            <div class="metric-icon">‚ùå</div>
            <div class="metric-content">
              <div class="metric-label">Mistakes</div>
              <div class="metric-value" id="mistakes">0</div>
            </div>
          </div>

          <div class="metric">
            <div class="metric-icon">üí°</div>
            <div class="metric-content">
              <div class="metric-label">Hint Dependency</div>
              <div class="metric-value" id="hintDependency">0%</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Column: Cards Container -->
      <div class="right-column-cards">
        <!-- User Move History Card -->
        <div class="stepwise-card">
          <div class="stepwise-header">
            <svg class="stepwise-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path
                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
            </svg>
            <h3>My Moves</h3>
          </div>

          <div class="stepwise-controls">
            <button class="stepwise-btn" id="getStepsBtn">Show My Moves</button>
            <span class="step-count" id="stepCount">0 moves</span>
          </div>

          <div class="stepwise-container">
            <button class="step-nav-btn step-nav-up" id="stepNavUp" disabled>
              <span>‚ñ≤</span>
            </button>
            <div class="stepwise-list" id="stepwiseList">
              <div class="stepwise-placeholder">Start playing to see your moves</div>
            </div>
            <button class="step-nav-btn step-nav-down" id="stepNavDown" disabled>
              <span>‚ñº</span>
            </button>
          </div>
        </div>

        <!-- Rules and Regulations Card -->
        <div class="rules-card">
          <div class="rules-header">
            <svg class="rules-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path
                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
            </svg>
            <h3>Rules & Pro Times</h3>
          </div>

          <div class="rules-content">
            <div class="rules-section">
              <h4>üèÜ Pro Time Targets</h4>
              <div class="time-targets">
                <div class="time-target">
                  <span class="difficulty-badge easy-badge">Easy</span>
                  <span class="target-time">
                    < 8 min</span>
                </div>
                <div class="time-target">
                  <span class="difficulty-badge medium-badge">Medium</span>
                  <span class="target-time">
                    < 12 min</span>
                </div>
                <div class="time-target">
                  <span class="difficulty-badge hard-badge">Hard</span>
                  <span class="target-time">
                    < 20 min</span>
                </div>
                <div class="time-target">
                  <span class="difficulty-badge expert-badge">Expert</span>
                  <span class="target-time">
                    < 35 min</span>
                </div>
              </div>
            </div>

            <div class="rules-section">
              <h4>üìã Game Rules</h4>
              <ul class="rules-list">
                <li>Fill all 81 cells with numbers 1-9</li>
                <li>Each row must contain 1-9 once</li>
                <li>Each column must contain 1-9 once</li>
                <li>Each 3√ó3 box must contain 1-9 once</li>
              </ul>
            </div>

            <div class="rules-section">
              <h4>‚≠ê Performance Tips</h4>
              <ul class="rules-list">
                <li>Plan before placing numbers</li>
                <li>Use logic, not guessing</li>
                <li>Minimize mistakes for better score</li>
                <li>Practice regularly to improve</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  

  <!-- Difficulty Selection Modal -->
  <div class="difficulty-modal" id="difficultyModal">
    <div class="difficulty-modal-overlay"></div>
    <div class="difficulty-modal-content">
      <h2>Select Difficulty</h2>
      <p>Choose your challenge level</p>

      <div class="difficulty-options">
        <label class="difficulty-option">
          <input type="radio" name="difficulty" value="easy">
          <div class="option-card">
            <div class="option-icon">üå±</div>
            <div class="option-name">Easy</div>
            <div class="option-desc">Perfect for beginners</div>
            <div class="option-criteria">
              <div class="criteria-item">‚è±Ô∏è 30 Minutes</div>
              <div class="criteria-item">üí° 10 Hints</div>
              <div class="criteria-item">‚ùå Unlimited Mistakes</div>
            </div>
          </div>
        </label>

        <label class="difficulty-option">
          <input type="radio" name="difficulty" value="medium" checked>
          <div class="option-card">
            <div class="option-icon">‚ö°</div>
            <div class="option-name">Medium</div>
            <div class="option-desc">Balanced challenge</div>
            <div class="option-criteria">
              <div class="criteria-item">‚è±Ô∏è 20 Minutes</div>
              <div class="criteria-item">üí° 10 Hints</div>
              <div class="criteria-item">‚ùå 10 Mistakes</div>
            </div>
          </div>
        </label>

        <label class="difficulty-option">
          <input type="radio" name="difficulty" value="hard">
          <div class="option-card">
            <div class="option-icon">üî•</div>
            <div class="option-name">Hard</div>
            <div class="option-desc">For experienced players</div>
            <div class="option-criteria">
              <div class="criteria-item">‚è±Ô∏è 10 Minutes</div>
              <div class="criteria-item">üí° 3 Hints</div>
              <div class="criteria-item">‚ùå 5 Mistakes</div>
            </div>
          </div>
        </label>

        <label class="difficulty-option">
          <input type="radio" name="difficulty" value="expert">
          <div class="option-card">
            <div class="option-icon">üíé</div>
            <div class="option-name">Expert</div>
            <div class="option-desc">Ultimate challenge</div>
            <div class="option-criteria">
              <div class="criteria-item">‚è±Ô∏è 10 Minutes</div>
              <div class="criteria-item">üí° No Hints</div>
              <div class="criteria-item">‚ùå 3 Mistakes</div>
            </div>
          </div>
        </label>
      </div>

      <div class="modal-actions">
        <button class="modal-btn cancel-btn" id="cancelDifficultyBtn">Cancel</button>
        <button class="modal-btn submit-btn" id="submitDifficultyBtn">Start Game</button>
      </div>
    </div>
  </div>

  <!-- Completion Modal -->
  <div id="completionModal" class="modal">
    <div class="modal-content" style="max-width: 500px;">
      <div class="modal-header">
        <h2>üéâ Congratulations!</h2>
      </div>
      <div class="modal-body">
        <p style="text-align: center; font-size: 18px; margin-bottom: 24px; color: var(--text-primary);">
          You completed the puzzle!
        </p>

        <div class="completion-stats">
          <div class="stat-row">
            <span class="stat-label">‚è±Ô∏è Time:</span>
            <span class="stat-value" id="completionTime">00:00</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">üìä Total Moves:</span>
            <span class="stat-value" id="completionMoves">0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">‚ö° Avg Time/Move:</span>
            <span class="stat-value" id="completionAvgTime">0s</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">‚ùå Mistakes:</span>
            <span class="stat-value" id="completionMistakes">0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">üí° Hints Used:</span>
            <span class="stat-value" id="completionHints">0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">üìà Stress Score:</span>
            <span class="stat-value" id="completionStress">0/100</span>
          </div>
        </div>
      </div>
      <div class="modal-actions" style="gap: 12px;">
        <button class="modal-btn cancel-btn" id="stayBtn">Stay on Page</button>
        <button class="modal-btn submit-btn" id="newGameFromCompletionBtn">New Game</button>
      </div>
    </div>
  </div>

  <script src="./play.js"></script>
</body>

</html>